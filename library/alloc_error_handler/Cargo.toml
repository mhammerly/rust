[package]
name = "alloc_error_handler"
version = "0.0.0"
license = "MIT OR Apache-2.0"
repository = "https://github.com/rust-lang/rust.git"
description = "The Rust Standard Library - Default alloc error handler"
edition = "2021"

[lib]
crate-type = ["rlib", "dylib"]

[dependencies]
# we want this to be no_std, but we need to build with std while bootstrapping.
# after bootstrapping, with no_std on, std will not be externed/used even with a dep
std = { path = "../std" }

# panic stuff is just a silly dance i have to do in this prototype
panic_unwind = { path = "../panic_unwind", optional = true }
panic_abort = { path = "../panic_abort" }

alloc = { path = "../alloc" }
compiler_builtins = { version = "0.1.40", features = ['rustc-dep-of-std'] }
core = { path = "../core" }

[features]
default = ["unified-sysroot-injection"]

compiler-builtins-mem = ['compiler_builtins/mem']
compiler-builtins-c = ["compiler_builtins/c"]
compiler-builtins-no-asm = ["compiler_builtins/no-asm"]
compiler-builtins-mangled-names = ["compiler_builtins/mangled-names"]

unified-sysroot-injection = []
panic-unwind = ["panic_unwind"]
